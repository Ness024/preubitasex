<section class="container">
    <div class="form-container">
        <h2>Agregar Nuevo Usuario...</h2>
        
        <form [formGroup]="userForm" (ngSubmit)="onSubmit()">
            <!-- Foto de usuario -->
            <fieldset class="form-group picture-select-container">
                <h4>Seleccione una foto</h4>
                <div class="picture-select">
                    <label class="picture-option">
                      <input type="radio" name="userPhoto" value="1" required hidden>
                      <img class="imgprofileselect" src="/business-woman.png" alt="">
                    </label>
                    <label class="picture-option">
                      <input type="radio" name="userPhoto" value="2" required hidden>
                      <img class="imgprofileselect" src="/businessman.png" alt="">
                    </label>
                  </div>
            </fieldset>
            <script>
                const labels = document.querySelectorAll('.picture-option');
              
                labels.forEach(label => {
                  const img = label.querySelector('img');
                  img.addEventListener('click', () => {
                    const radio = label.querySelector('input');
                    radio.checked = true;
                  });
                });
              </script>
            <!-- Titulo del Documento -->
            <fieldset class="form-group title">
                <label for="name">Nombre</label>
                <input formControlName="name" class="input-form" type="text" id="name" name="name"  maxlength="255" placeholder="Nombre"/>
                @if (userForm.get("name")?.invalid && userForm.get("name")?.touched) {
                    @if (userForm.get("name")?.hasError("required")) {
                        <span class="msg_error">El titulo es obligatorio</span>
                    }
                    @if (userForm.get("name")?.hasError("maxlength")) {
                        <span class="msg_error">El titulo no puede tener más de 255 caracteres</span>
                    }
                }
            </fieldset>

             <!-- Username -->
             <label for="username">Alias (Username)</label>
             <fieldset class="form-group title">
                 <input formControlName="username" class="input-form" type="text" id="username" name="username" placeholder="Username" required="">
                @if (userForm.get("username")?.invalid && userForm.get("name")?.touched) {
                    @if (userForm.get("username")?.hasError("required")) {
                        <span class="msg_error">El titulo es obligatorio</span>
                    }
                    @if (userForm.get("username")?.hasError("maxlength")) {
                        <span class="msg_error">El titulo no puede tener más de 255 caracteres</span>
                    }
                }
             </fieldset>


            <label for="password">Contraseña</label>
            <fieldset class="form-group title">
                <input formControlName="password" class="input-form" type="text" id="password" name="password" placeholder="Contraseña" required="">
                @if (userForm.get("password")?.invalid && userForm.get("password")?.touched) {
                    @if (userForm.get("password")?.hasError("required")) {
                        <span class="msg_error">El titulo es obligatorio</span>
                    }
                    @if (userForm.get("password")?.hasError("maxlength")) {
                        <span class="msg_error">El titulo no puede tener más de 255 caracteres</span>
                    }
                }
            </fieldset>

            <!-- Rol -->
            <fieldset class="form-group type">
                <label for="rol">Rol</label>
                <select formControlName="rol" class="input-form" id="rol" name="rol" required="">
                    <option value="" disabled selected>Selecciona una opción</option>
                </select>
                @if (userForm.get("rol")?.invalid && userForm.get("rol")?.touched) {
                    @if (userForm.get("rol")?.hasError("required")) {
                        <span class="msg_error">Campo obligatorio</span>
                    }
                }
            </fieldset>
            <fieldset class="form-group type">
                <label for="permissions">Permisos</label>
                @for (item of ['create', 'read', 'update', 'delete']; track $index) {
                    <label for="">
                    <input 
                        type="checkbox" 
                        [value]="item"
                        (change)="onCheckboxChange($event)"
                    />
                    {{ item }}
                    </label>
                }
            </fieldset>

            <!-- Botón para guardar -->
            <fieldset class="form-group submit">
                <button type="submit" >Guardar Documento</button>
            </fieldset>
            

        </form>
    </div>
</section>
